
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>A First Foray into Data Scraping &#8212; SLB Data and Analytics</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'FirstForay';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="SLB boxscore data scrape" href="SLB_boxscore_scrape.html" />
    <link rel="prev" title="Python" href="python.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/jumpshot_theory_logo.png" class="logo__image only-light" alt="SLB Data and Analytics - Home"/>
    <script>document.write(`<img src="_static/jumpshot_theory_logo.png" class="logo__image only-dark" alt="SLB Data and Analytics - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    SLB Data and Analytics
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="python.html">Python</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">A First Foray into Data Scraping</a></li>
<li class="toctree-l1"><a class="reference internal" href="SLB_boxscore_scrape.html">SLB boxscore data scrape</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Further resources</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FFirstForay.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/FirstForay.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>A First Foray into Data Scraping</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scraping-player-assist-and-turnover-data-from-brithoops">Scraping Player Assist and Turnover Data from BritHoops</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#converting-html-rows-into-a-pandas-dataframe">Converting HTML Rows into a Pandas Dataframe</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#intialising-empty-lists-for-the-stats-we-want">Intialising empty lists for the stats we want</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#loop-over-html-table-rows-and-put-the-data-into-the-lists">Loop over HTML table rows and put the data into the lists</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#combine-the-lists-into-a-pandas-dataframe">Combine the lists into a Pandas dataframe</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-and-analysis-of-the-data">Filtering and analysis of the data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calculating-assist-to-turnover-ratios">Calculating assist to turnover ratios</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="a-first-foray-into-data-scraping">
<h1>A First Foray into Data Scraping<a class="headerlink" href="#a-first-foray-into-data-scraping" title="Link to this heading">#</a></h1>
<p>In this Chapter we’re going to have a look at how to scrape information from a website, before loading it into a dataframe and doing some minor processing. The main aims are:</p>
<ul class="simple">
<li><p>Analyse the HTML data to determine which parts you need.</p></li>
<li><p>Scrape the information you want into the Python list data-type.</p></li>
<li><p>Collect the lists together into a Pandas dataframe.</p></li>
<li><p>Carry out any processing of the data.</p></li>
</ul>
<section id="scraping-player-assist-and-turnover-data-from-brithoops">
<h2>Scraping Player Assist and Turnover Data from BritHoops<a class="headerlink" href="#scraping-player-assist-and-turnover-data-from-brithoops" title="Link to this heading">#</a></h2>
<p>As our first exercise, we will aim to scrape player assist and turnover data from the <a class="reference external" href="https://brithoops.com/index.php">Brithoops website</a>. Note that this data will be updated as more games are played, so if you run this code yourself you are likely to see somewhat different results.</p>
<p>Handily, BritHoops already has a <a class="reference external" href="https://brithoops.com/bbl-player-stats/assists-turnovers.php">page that lists player assist and turnover data</a>, so we will use that as part of this learning exercise. In a web browser, the BritHoops page looks like this:</p>
<p><img alt="BH-assists-sshot.png" src="_images/BH-assists-sshot.png" /></p>
<p>Let’s see what we can do to scrape some of the data. First thing we need to do is import the necessary Python modules and libraries.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
<p>We will then use requests and BeautifulSoup to grab the HTML source for the page we are interested in.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">brit_hoops_url</span> <span class="o">=</span> <span class="s2">&quot;https://brithoops.com/bbl-player-stats/assists-turnovers.php&quot;</span>
<span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">brit_hoops_url</span><span class="p">)</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>You may find it useful to take that “soup”, save it as a HTML file, and open it in a text editor. The next piece of code does that and will generate a file called <em>example-soup.html</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">html</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">prettify</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;example-soup.html&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Looking at the HTML, the first thing you will probably notice is that there is a lot of it! Much of this is the functionality required for menus etc. Scroll down a bit further and you should find the actual data we are looking for. You could also use the search/find functionality in your text editor to look for one of the key terms we can see on the website, such as “AP40” (which is the number of assists per 40 minutes). In my text editor, this looked like:</p>
<p><img alt="BH-html.png" src="_images/BH-html.png" /></p>
<p>This reveals that the information we want is saved in a HTML table. We can use Beautiful Soup to extract only tables from the HTML.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tables</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>It’s possible the webpage contained more than one table, so we can check the length of the Python object to see how many tables were found.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">tables</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<p>Good news! It looks like there was only one table this time. If there were multiple tables they would be returned a list, with each table being a separate list element.</p>
<p>Before we move on, a very quick primer on <a class="reference external" href="https://www.w3schools.com/html/html_tables.asp">tables in HTML</a>. Tables are made up of rows, which are &lt;tr&gt; in HTML. Each element in a table row is in &lt;td&gt; tags (td for table data). It’s those pieces of table data that we would like to scrape out.</p>
<p>Let’s unpack the table data into row form, by making a new list. Each element in that list will correspond to a row in the table.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rows</span> <span class="o">=</span> <span class="n">tables</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>From looking at the HTML, I know that the first row is the table header, and the first player will be on the second row of the table. Recalling that Python starts its indexing at 0 (rather than 1), we can take a peek at that first player row to make sure we’re getting the correct information.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;tr&gt;
&lt;td class=&quot;nm&quot;&gt;&lt;a class=&quot;pl-profile&quot; href=&quot;/bbl-player-stats/profile.php?id=1197&quot;&gt;Prentiss Nixon&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;SHE&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;126&lt;/td&gt;
&lt;td&gt;31.50&lt;/td&gt;
&lt;td&gt;26&lt;/td&gt;
&lt;td&gt;6.50&lt;/td&gt;
&lt;td&gt;8.26&lt;/td&gt;
&lt;td&gt;42.07&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;2.50&lt;/td&gt;
&lt;td&gt;3.18&lt;/td&gt;
&lt;td&gt;12.46&lt;/td&gt;
&lt;td&gt;2.60&lt;/td&gt;
&lt;/tr&gt;
</pre></div>
</div>
</div>
</div>
<p>Success! We’ve found Prentiss Nixon’s data within the table. Our next task is to extract this information and get it into a Pandas dataframe.</p>
</section>
<section id="converting-html-rows-into-a-pandas-dataframe">
<h2>Converting HTML Rows into a Pandas Dataframe<a class="headerlink" href="#converting-html-rows-into-a-pandas-dataframe" title="Link to this heading">#</a></h2>
<p>Now that we have the HTML data we need as a list of rows, we need to extract it and eventually turn it into a Pandas dataframe. The general overview of what we will do is:</p>
<ol class="arabic simple">
<li><p>Intialise empty Python lists for each player stat that we want to scrape.</p></li>
<li><p>Loop over every row in the table (apart from the header row).</p></li>
<li><p>For each row, find the data we want, and put it in to the correct list we made in 1.</p></li>
<li><p>Combine the lists together into a Pandas dataframe.</p></li>
</ol>
<section id="intialising-empty-lists-for-the-stats-we-want">
<h3>Intialising empty lists for the stats we want<a class="headerlink" href="#intialising-empty-lists-for-the-stats-we-want" title="Link to this heading">#</a></h3>
<p>The HTML table from BritHoops contains quite a lot of data on assists and turnovers. While we could grab every item, here I will show how we extract only a subset of the stats. We are going to extract:</p>
<ul class="simple">
<li><p>Player name</p></li>
<li><p>Team</p></li>
<li><p>Games played (G)</p></li>
<li><p>Assists per game (APG)</p></li>
<li><p>Assists per 40 minutes (AP40)</p></li>
<li><p>Turnovers per game (TOPG)</p></li>
<li><p>Turnovers per 40 minutes (TOP40)</p></li>
</ul>
<p>Creating the empty lists is easy - thinking of the names for them is probably the hardest part.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">team</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">games</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">apg</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">ap40</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">topg</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">top40</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="loop-over-html-table-rows-and-put-the-data-into-the-lists">
<h3>Loop over HTML table rows and put the data into the lists<a class="headerlink" href="#loop-over-html-table-rows-and-put-the-data-into-the-lists" title="Link to this heading">#</a></h3>
<p>Inspecting the data on BritHoops (either using the image above or loading the page in a web browser), we can see that the player name is in the first column (0 Python index), the team name is in the second (1), games played is in the third (2), APG is in the seventh (6), AP40 is in the eighth (7), TOPG is in the 11th (10), and TOP40 is in the 12th (11).</p>
<p>By using a loop, we can work through each row and “append” the data in the columns we want to the appropriate list. To do that, we also need to extract all of the “table data” into a list I’m going to call “cells”. We skip the first row as we know it contains the table headers, rather than the data we want.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
    <span class="n">cells</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;td&#39;</span><span class="p">)</span>
    <span class="c1"># The name is held within HTML &lt;a&gt; link tags, hence we used Beautiful Soup to extract only the text part that we want</span>
    <span class="n">name</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cells</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
    <span class="n">team</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cells</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
    <span class="n">games</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cells</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
    <span class="n">apg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cells</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
    <span class="n">ap40</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cells</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
    <span class="n">topg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cells</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
    <span class="n">top40</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cells</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s see how long the name list is, this will tell us how much data we have extracted (how many players data there is).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>98
</pre></div>
</div>
</div>
</div>
<p>It looks like we have the data for 98 players, but BritHoops only displayed 10. What’s happening here?</p>
<p>It turns out that the BritHoops website contains data for all of the players in the SLB, but only displays the top 10 in a web browser. You can then load the next 10 (and so on) using the controls under the table when using a web browser.</p>
</section>
<section id="combine-the-lists-into-a-pandas-dataframe">
<h3>Combine the lists into a Pandas dataframe<a class="headerlink" href="#combine-the-lists-into-a-pandas-dataframe" title="Link to this heading">#</a></h3>
<p>Using Pandas with a little bit of numpy, we can easily squash all of the lists together into something that looks like a spreadsheet, known as a dataframe. It’s very common for a dataframe to be referred to as df. We set the df column names as we do this.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">([</span><span class="n">name</span><span class="p">,</span> <span class="n">team</span><span class="p">,</span> <span class="n">games</span><span class="p">,</span> <span class="n">apg</span><span class="p">,</span> <span class="n">ap40</span><span class="p">,</span> <span class="n">topg</span><span class="p">,</span> <span class="n">top40</span><span class="p">]),</span> 
                                   <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s2">&quot;Team&quot;</span><span class="p">,</span> <span class="s2">&quot;Games&quot;</span><span class="p">,</span> <span class="s2">&quot;APG&quot;</span><span class="p">,</span> <span class="s2">&quot;AP40&quot;</span><span class="p">,</span> <span class="s2">&quot;TOPG&quot;</span><span class="p">,</span> <span class="s2">&quot;TOP40&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>If we then call this “df” Python object, it will show us the first few, and final few rows of the dataframe, skipping over ones in the middle.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Team</th>
      <th>Games</th>
      <th>APG</th>
      <th>AP40</th>
      <th>TOPG</th>
      <th>TOP40</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Prentiss Nixon</td>
      <td>SHE</td>
      <td>4</td>
      <td>6.50</td>
      <td>8.26</td>
      <td>2.50</td>
      <td>3.18</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Isaiah Hill</td>
      <td>CAL</td>
      <td>5</td>
      <td>6.40</td>
      <td>8.77</td>
      <td>2.40</td>
      <td>3.29</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Jalen Ray</td>
      <td>SUR</td>
      <td>1</td>
      <td>6.00</td>
      <td>7.58</td>
      <td>0.00</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Patrick Whelan</td>
      <td>CAL</td>
      <td>3</td>
      <td>5.33</td>
      <td>7.25</td>
      <td>1.33</td>
      <td>1.81</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Kedrian Johnson</td>
      <td>BRI</td>
      <td>4</td>
      <td>5.25</td>
      <td>6.72</td>
      <td>3.00</td>
      <td>3.84</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>93</th>
      <td>Alen Hadzibegovic</td>
      <td>LON</td>
      <td>1</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>1.00</td>
      <td>4.15</td>
    </tr>
    <tr>
      <th>94</th>
      <td>Sauveur Kande</td>
      <td>NEW</td>
      <td>1</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>95</th>
      <td>Pasquale Landolfi</td>
      <td>BRI</td>
      <td>4</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>96</th>
      <td>Kieran Otabor</td>
      <td>SUR</td>
      <td>1</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>97</th>
      <td>Remy Udeh</td>
      <td>LON</td>
      <td>2</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>
<p>98 rows × 7 columns</p>
</div></div></div>
</div>
<p>At this point, we could export the dataframe as either CSV or XLS format to continue processing it in spreadsheet software. However, we will carry out some basic analysis with Pandas.</p>
</section>
</section>
<section id="filtering-and-analysis-of-the-data">
<h2>Filtering and analysis of the data<a class="headerlink" href="#filtering-and-analysis-of-the-data" title="Link to this heading">#</a></h2>
<p>Let’s assume we are looking for the players who are performing the best in terms of lots of assits while having low turnovers. We probably don’t want to include all 98 players that we extracted, so let’s start by keeping only the players who have played a minimum of three games (this is data from very early in the season). I then check the length of the resulting dataframe to see how many players remain.</p>
<p>We also need to ensure that the Games data is numeric, as otherwise Python may assume it is a string.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Games&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Games&#39;</span><span class="p">])</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Games&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>69
</pre></div>
</div>
</div>
</div>
<p>To cut this down even further, we can assume that the kind of player we want to look at has an AP40 greater than 4.5 (so they would have at least 4.5 assists per game, if they played all 40 minutes) and that their actual assists per game is greater than 3.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;AP40&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;AP40&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;APG&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;APG&#39;</span><span class="p">])</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;AP40&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">4.5</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;APG&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>14
</pre></div>
</div>
</div>
</div>
<p>This basic filtering has reduced the number of players down to 14. For a little more analysis we can take a look at assist to turnover ratios.</p>
<section id="calculating-assist-to-turnover-ratios">
<h3>Calculating assist to turnover ratios<a class="headerlink" href="#calculating-assist-to-turnover-ratios" title="Link to this heading">#</a></h3>
<p>You may have noticed that BritHoops already displays the assist to turnover ratio, but here we will calculate it for ourselves to see how we can do this with dataframes.</p>
<p>First we will define a simple function to make the calculation. Note that if a player hadn’t committed any turnovers, this function would give an error as it tries to divide by zero.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">assists_to_turnovers</span><span class="p">(</span><span class="n">assists</span><span class="p">,</span> <span class="n">turnovers</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Computes the assist to turnover ratio as assists / turnovers&quot;&quot;&quot;</span>
    <span class="n">ast_turn</span> <span class="o">=</span> <span class="n">assists</span> <span class="o">/</span> <span class="n">turnovers</span>

    <span class="k">return</span> <span class="n">ast_turn</span>
</pre></div>
</div>
</div>
</div>
<p>We now calculate this for every row in the dataframe using what’s know as a lambda. Then we can show the dataframe including this new data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;TOPG&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;TOPG&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;AST:TO&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">assists_to_turnovers</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;APG&#39;</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;TOPG&#39;</span><span class="p">]),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Team</th>
      <th>Games</th>
      <th>APG</th>
      <th>AP40</th>
      <th>TOPG</th>
      <th>TOP40</th>
      <th>AST:TO</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Prentiss Nixon</td>
      <td>SHE</td>
      <td>4</td>
      <td>6.50</td>
      <td>8.26</td>
      <td>2.50</td>
      <td>3.18</td>
      <td>2.600000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Isaiah Hill</td>
      <td>CAL</td>
      <td>5</td>
      <td>6.40</td>
      <td>8.77</td>
      <td>2.40</td>
      <td>3.29</td>
      <td>2.666667</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Patrick Whelan</td>
      <td>CAL</td>
      <td>3</td>
      <td>5.33</td>
      <td>7.25</td>
      <td>1.33</td>
      <td>1.81</td>
      <td>4.007519</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Kedrian Johnson</td>
      <td>BRI</td>
      <td>4</td>
      <td>5.25</td>
      <td>6.72</td>
      <td>3.00</td>
      <td>3.84</td>
      <td>1.750000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Cameron Holden</td>
      <td>CHE</td>
      <td>4</td>
      <td>4.75</td>
      <td>6.71</td>
      <td>2.00</td>
      <td>2.83</td>
      <td>2.375000</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Cameron Gooden</td>
      <td>SUR</td>
      <td>3</td>
      <td>4.33</td>
      <td>5.46</td>
      <td>2.67</td>
      <td>3.36</td>
      <td>1.621723</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Jordan Taylor</td>
      <td>LON</td>
      <td>3</td>
      <td>4.00</td>
      <td>5.62</td>
      <td>2.33</td>
      <td>3.28</td>
      <td>1.716738</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Ali Youssouf Ali</td>
      <td>MAN</td>
      <td>4</td>
      <td>4.00</td>
      <td>5.64</td>
      <td>0.50</td>
      <td>0.70</td>
      <td>8.000000</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Nicholas Lewis</td>
      <td>MAN</td>
      <td>4</td>
      <td>3.75</td>
      <td>6.40</td>
      <td>2.00</td>
      <td>3.41</td>
      <td>1.875000</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Jordan Spencer</td>
      <td>NEW</td>
      <td>5</td>
      <td>3.40</td>
      <td>5.69</td>
      <td>1.20</td>
      <td>2.01</td>
      <td>2.833333</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Kyle Jimenez</td>
      <td>CAL</td>
      <td>3</td>
      <td>3.33</td>
      <td>8.87</td>
      <td>2.33</td>
      <td>6.21</td>
      <td>1.429185</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Josh Steel</td>
      <td>SUR</td>
      <td>3</td>
      <td>3.33</td>
      <td>4.72</td>
      <td>2.33</td>
      <td>3.31</td>
      <td>1.429185</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Ricky Clemons</td>
      <td>CHE</td>
      <td>4</td>
      <td>3.25</td>
      <td>4.86</td>
      <td>2.00</td>
      <td>2.99</td>
      <td>1.625000</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Evan Walshe</td>
      <td>BRI</td>
      <td>4</td>
      <td>3.25</td>
      <td>5.70</td>
      <td>2.00</td>
      <td>3.51</td>
      <td>1.625000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can calculate a similar ratio but using the per 40 minutes stats instead. Note that we use the same function as the “per game” stats as it simply divides the two values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;TOP40&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;TOP40&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;AST40:TO40&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">assists_to_turnovers</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;AP40&#39;</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;TOP40&#39;</span><span class="p">]),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>It can be useful to take a look at summary statistics (mean, standard deviation etc.) too, let’s go ahead and do that for the assists to turnover ratio (per game).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;AST:TO&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    14.000000
mean      2.539596
std       1.728221
min       1.429185
25%       1.625000
50%       1.812500
75%       2.650000
max       8.000000
Name: AST:TO, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>We can see that while the average assists to turnovers, for this group of players who already have a lot of assists, is around 2.5, but one players has a frankly amazing 8.0 AST:TO. Let’s see who that is by asking for all rows where AST:TO is greater than 7.9 (to allow for any rounding errors)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;AST:TO&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">7.9</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Team</th>
      <th>Games</th>
      <th>APG</th>
      <th>AP40</th>
      <th>TOPG</th>
      <th>TOP40</th>
      <th>AST:TO</th>
      <th>AST40:TO40</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>7</th>
      <td>Ali Youssouf Ali</td>
      <td>MAN</td>
      <td>4</td>
      <td>4.0</td>
      <td>5.64</td>
      <td>0.5</td>
      <td>0.7</td>
      <td>8.0</td>
      <td>8.057143</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>It appears than Manchester Basketball’s Ali Ali is a safe pair of hands! While his 4 assists per game isn’t huge, the 0.5 turnovers per game is very small. Let’s see how long he can keep this up.</p>
<p>We should also check the summary statistics for the per 40 ratio too.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;AST40:TO40&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    14.000000
mean      2.542614
std       1.742138
min       1.425982
25%       1.625105
50%       1.813416
75%       2.648611
max       8.057143
Name: AST40:TO40, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>The stats are really close to those per game, so maybe we don’t need to worry about this metric too much.</p>
<p>To finish up, we can sort our dataframe by AST:TO to see who else is doing well, we can also then sort by APG and TOPG, just in case there are any ties. I have added a caption to the dataframe to make it look more like a table, and taken only the top 10 players by putting them into a new dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_top_10</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;AST:TO&#39;</span><span class="p">)</span>
<span class="n">df_top_10</span> <span class="o">=</span> <span class="n">df_top_10</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;AST:TO&quot;</span><span class="p">,</span> <span class="s2">&quot;APG&quot;</span><span class="p">,</span> <span class="s2">&quot;TOPG&quot;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">])</span>
<span class="n">df_top_10</span> <span class="o">=</span> <span class="n">df_top_10</span><span class="p">[[</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s2">&quot;Team&quot;</span><span class="p">,</span> <span class="s2">&quot;Games&quot;</span><span class="p">,</span> <span class="s2">&quot;APG&quot;</span><span class="p">,</span> <span class="s2">&quot;AP40&quot;</span><span class="p">,</span> <span class="s2">&quot;TOPG&quot;</span><span class="p">,</span> <span class="s2">&quot;TOP40&quot;</span><span class="p">,</span> <span class="s2">&quot;AST:TO&quot;</span><span class="p">]]</span>
<span class="n">df_top_10</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">({</span><span class="s1">&#39;AST:TO&#39;</span><span class="p">:</span><span class="s1">&#39;</span><span class="si">{:.2}</span><span class="s1">&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s1">&#39;SLB Assist to Turnover Leaders&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set_table_styles</span><span class="p">([{</span>
    <span class="s1">&#39;selector&#39;</span><span class="p">:</span> <span class="s1">&#39;caption&#39;</span><span class="p">,</span>
    <span class="s1">&#39;props&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;text-align&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;font-size&#39;</span><span class="p">,</span> <span class="s1">&#39;18px&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;font-weight&#39;</span><span class="p">,</span> <span class="s1">&#39;bold&#39;</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">}])</span><span class="o">.</span><span class="n">hide</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_66fb2 caption {
  text-align: left;
  font-size: 18px;
  font-weight: bold;
}
</style>
<table id="T_66fb2">
  <caption>SLB Assist to Turnover Leaders</caption>
  <thead>
    <tr>
      <th id="T_66fb2_level0_col0" class="col_heading level0 col0" >Name</th>
      <th id="T_66fb2_level0_col1" class="col_heading level0 col1" >Team</th>
      <th id="T_66fb2_level0_col2" class="col_heading level0 col2" >Games</th>
      <th id="T_66fb2_level0_col3" class="col_heading level0 col3" >APG</th>
      <th id="T_66fb2_level0_col4" class="col_heading level0 col4" >AP40</th>
      <th id="T_66fb2_level0_col5" class="col_heading level0 col5" >TOPG</th>
      <th id="T_66fb2_level0_col6" class="col_heading level0 col6" >TOP40</th>
      <th id="T_66fb2_level0_col7" class="col_heading level0 col7" >AST:TO</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td id="T_66fb2_row0_col0" class="data row0 col0" >Ali Youssouf Ali</td>
      <td id="T_66fb2_row0_col1" class="data row0 col1" >MAN</td>
      <td id="T_66fb2_row0_col2" class="data row0 col2" >4</td>
      <td id="T_66fb2_row0_col3" class="data row0 col3" >4.000000</td>
      <td id="T_66fb2_row0_col4" class="data row0 col4" >5.640000</td>
      <td id="T_66fb2_row0_col5" class="data row0 col5" >0.500000</td>
      <td id="T_66fb2_row0_col6" class="data row0 col6" >0.700000</td>
      <td id="T_66fb2_row0_col7" class="data row0 col7" >8.0</td>
    </tr>
    <tr>
      <td id="T_66fb2_row1_col0" class="data row1 col0" >Patrick Whelan</td>
      <td id="T_66fb2_row1_col1" class="data row1 col1" >CAL</td>
      <td id="T_66fb2_row1_col2" class="data row1 col2" >3</td>
      <td id="T_66fb2_row1_col3" class="data row1 col3" >5.330000</td>
      <td id="T_66fb2_row1_col4" class="data row1 col4" >7.250000</td>
      <td id="T_66fb2_row1_col5" class="data row1 col5" >1.330000</td>
      <td id="T_66fb2_row1_col6" class="data row1 col6" >1.810000</td>
      <td id="T_66fb2_row1_col7" class="data row1 col7" >4.0</td>
    </tr>
    <tr>
      <td id="T_66fb2_row2_col0" class="data row2 col0" >Jordan Spencer</td>
      <td id="T_66fb2_row2_col1" class="data row2 col1" >NEW</td>
      <td id="T_66fb2_row2_col2" class="data row2 col2" >5</td>
      <td id="T_66fb2_row2_col3" class="data row2 col3" >3.400000</td>
      <td id="T_66fb2_row2_col4" class="data row2 col4" >5.690000</td>
      <td id="T_66fb2_row2_col5" class="data row2 col5" >1.200000</td>
      <td id="T_66fb2_row2_col6" class="data row2 col6" >2.010000</td>
      <td id="T_66fb2_row2_col7" class="data row2 col7" >2.8</td>
    </tr>
    <tr>
      <td id="T_66fb2_row3_col0" class="data row3 col0" >Isaiah Hill</td>
      <td id="T_66fb2_row3_col1" class="data row3 col1" >CAL</td>
      <td id="T_66fb2_row3_col2" class="data row3 col2" >5</td>
      <td id="T_66fb2_row3_col3" class="data row3 col3" >6.400000</td>
      <td id="T_66fb2_row3_col4" class="data row3 col4" >8.770000</td>
      <td id="T_66fb2_row3_col5" class="data row3 col5" >2.400000</td>
      <td id="T_66fb2_row3_col6" class="data row3 col6" >3.290000</td>
      <td id="T_66fb2_row3_col7" class="data row3 col7" >2.7</td>
    </tr>
    <tr>
      <td id="T_66fb2_row4_col0" class="data row4 col0" >Prentiss Nixon</td>
      <td id="T_66fb2_row4_col1" class="data row4 col1" >SHE</td>
      <td id="T_66fb2_row4_col2" class="data row4 col2" >4</td>
      <td id="T_66fb2_row4_col3" class="data row4 col3" >6.500000</td>
      <td id="T_66fb2_row4_col4" class="data row4 col4" >8.260000</td>
      <td id="T_66fb2_row4_col5" class="data row4 col5" >2.500000</td>
      <td id="T_66fb2_row4_col6" class="data row4 col6" >3.180000</td>
      <td id="T_66fb2_row4_col7" class="data row4 col7" >2.6</td>
    </tr>
    <tr>
      <td id="T_66fb2_row5_col0" class="data row5 col0" >Cameron Holden</td>
      <td id="T_66fb2_row5_col1" class="data row5 col1" >CHE</td>
      <td id="T_66fb2_row5_col2" class="data row5 col2" >4</td>
      <td id="T_66fb2_row5_col3" class="data row5 col3" >4.750000</td>
      <td id="T_66fb2_row5_col4" class="data row5 col4" >6.710000</td>
      <td id="T_66fb2_row5_col5" class="data row5 col5" >2.000000</td>
      <td id="T_66fb2_row5_col6" class="data row5 col6" >2.830000</td>
      <td id="T_66fb2_row5_col7" class="data row5 col7" >2.4</td>
    </tr>
    <tr>
      <td id="T_66fb2_row6_col0" class="data row6 col0" >Nicholas Lewis</td>
      <td id="T_66fb2_row6_col1" class="data row6 col1" >MAN</td>
      <td id="T_66fb2_row6_col2" class="data row6 col2" >4</td>
      <td id="T_66fb2_row6_col3" class="data row6 col3" >3.750000</td>
      <td id="T_66fb2_row6_col4" class="data row6 col4" >6.400000</td>
      <td id="T_66fb2_row6_col5" class="data row6 col5" >2.000000</td>
      <td id="T_66fb2_row6_col6" class="data row6 col6" >3.410000</td>
      <td id="T_66fb2_row6_col7" class="data row6 col7" >1.9</td>
    </tr>
    <tr>
      <td id="T_66fb2_row7_col0" class="data row7 col0" >Kedrian Johnson</td>
      <td id="T_66fb2_row7_col1" class="data row7 col1" >BRI</td>
      <td id="T_66fb2_row7_col2" class="data row7 col2" >4</td>
      <td id="T_66fb2_row7_col3" class="data row7 col3" >5.250000</td>
      <td id="T_66fb2_row7_col4" class="data row7 col4" >6.720000</td>
      <td id="T_66fb2_row7_col5" class="data row7 col5" >3.000000</td>
      <td id="T_66fb2_row7_col6" class="data row7 col6" >3.840000</td>
      <td id="T_66fb2_row7_col7" class="data row7 col7" >1.8</td>
    </tr>
    <tr>
      <td id="T_66fb2_row8_col0" class="data row8 col0" >Jordan Taylor</td>
      <td id="T_66fb2_row8_col1" class="data row8 col1" >LON</td>
      <td id="T_66fb2_row8_col2" class="data row8 col2" >3</td>
      <td id="T_66fb2_row8_col3" class="data row8 col3" >4.000000</td>
      <td id="T_66fb2_row8_col4" class="data row8 col4" >5.620000</td>
      <td id="T_66fb2_row8_col5" class="data row8 col5" >2.330000</td>
      <td id="T_66fb2_row8_col6" class="data row8 col6" >3.280000</td>
      <td id="T_66fb2_row8_col7" class="data row8 col7" >1.7</td>
    </tr>
    <tr>
      <td id="T_66fb2_row9_col0" class="data row9 col0" >Ricky Clemons</td>
      <td id="T_66fb2_row9_col1" class="data row9 col1" >CHE</td>
      <td id="T_66fb2_row9_col2" class="data row9 col2" >4</td>
      <td id="T_66fb2_row9_col3" class="data row9 col3" >3.250000</td>
      <td id="T_66fb2_row9_col4" class="data row9 col4" >4.860000</td>
      <td id="T_66fb2_row9_col5" class="data row9 col5" >2.000000</td>
      <td id="T_66fb2_row9_col6" class="data row9 col6" >2.990000</td>
      <td id="T_66fb2_row9_col7" class="data row9 col7" >1.6</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>In this Chapter you have seen how data can be scraped from websites and placed into Pandas dataframes. We also engaged in some minor analysis of the data and calculated some other metrics.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="python.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Python</p>
      </div>
    </a>
    <a class="right-next"
       href="SLB_boxscore_scrape.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">SLB boxscore data scrape</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scraping-player-assist-and-turnover-data-from-brithoops">Scraping Player Assist and Turnover Data from BritHoops</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#converting-html-rows-into-a-pandas-dataframe">Converting HTML Rows into a Pandas Dataframe</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#intialising-empty-lists-for-the-stats-we-want">Intialising empty lists for the stats we want</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#loop-over-html-table-rows-and-put-the-data-into-the-lists">Loop over HTML table rows and put the data into the lists</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#combine-the-lists-into-a-pandas-dataframe">Combine the lists into a Pandas dataframe</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-and-analysis-of-the-data">Filtering and analysis of the data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calculating-assist-to-turnover-ratios">Calculating assist to turnover ratios</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Grant Hill (@jumpshot_theory)
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>